(this.webpackJsonphearo=this.webpackJsonphearo||[]).push([[0],{173:function(e,n,a){"use strict";a.r(n);var t,c,r,i,s,l,o,j,d=a(0),b=a.n(d),u=a(133),m=a.n(u),p=a(20),O=a(145),h=a(216),x=a(217),g=a(212),v=a(141),f=a(85),y=a(18),w=a(191),S=a(220),k=a(193),L=a(194),T=a(195),C=a(196),R=a(147),$=a(198),N=a(146),q=a(2),z=function(){return Object(q.jsxs)(w.a,{align:"center",justify:{base:"center",md:"space-around",xl:"space-between"},direction:{base:"column-reverse",md:"row"},wrap:"no-wrap",minH:"65vh",mb:16,children:[Object(q.jsxs)(S.b,{spacing:4,w:{base:"60%",sm:"60%",md:"60%"},align:["center","center","flex-start","flex-start"],children:[Object(q.jsx)(k.a,{size:"4xl",fontSize:"100",textAlign:["center","center","left","left"],children:"HEARO"}),Object(q.jsx)(L.a,{size:"lg",fontSize:"25",opacity:"0.8",fontWeight:"normal",lineHeight:1.5,textAlign:["center","center","left","left"],children:"Find quiet places to socialise in Sydney."}),Object(q.jsx)(T.a,{children:Object(q.jsx)(C.a,{href:"/search",children:Object(q.jsx)(R.a,{variant:"solid",colorScheme:"teal",size:"md",mt:5,type:"submit",children:"Search"})})})]}),Object(q.jsx)($.a,{w:{base:"40%",sm:"40%",md:"40%"},mb:{base:12,md:0},children:Object(q.jsx)(N.a,{color:"#81e6d9",size:{base:200}})})]})},I=a(38),_=a.n(I),P=a(63),D=a(9),F=a(5),A=a(221),E=a(78),B=a(202),H=a(203),M=a(223),Q=a(53),V=a(218),Y=Object(V.a)(t||(t=Object(Q.a)(["\n  mutation login($email: String!, $password: String!) {\n    login(email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),U=Object(V.a)(c||(c=Object(Q.a)(["\n  mutation addUser($username: String!, $email: String!, $password: String!) {\n    addUser(username: $username, email: $email, password: $password) {\n      token\n      user {\n        _id\n        username\n      }\n    }\n  }\n"]))),W=Object(V.a)(r||(r=Object(Q.a)(["\n  mutation addPlace(\n    $placeName: String!\n    $placeLocation: String!\n    $placeType: String!\n    $rating: String!\n    $comment: String!\n  ) {\n    addPlace(\n      placeName: $placeName\n      placeLocation: $placeLocation\n      placeType: $placeType\n      rating: $rating\n      comment: $comment\n    ) {\n      rating\n      comment\n      createdAt\n      place {\n        placeName\n        placeLocation\n        placeType\n      }\n      user {\n        _id\n      }\n    }\n  }\n"]))),J=a(97),G=a(134),K=a(114),X=new(function(){function e(){Object(J.a)(this,e)}return Object(G.a)(e,[{key:"getProfile",value:function(){return Object(K.a)(this.getToken())}},{key:"loggedIn",value:function(){var e=this.getToken();return!(!e||this.isTokenExpired(e))}},{key:"isTokenExpired",value:function(e){return Object(K.a)(e).exp<Date.now()/1e3&&(localStorage.removeItem("id_token"),!0)}},{key:"getToken",value:function(){return localStorage.getItem("id_token")}},{key:"login",value:function(e){localStorage.setItem("id_token",e),window.location.assign("/")}},{key:"logout",value:function(){localStorage.removeItem("id_token"),window.location.reload()}}]),e}()),Z=function(e){var n=Object(d.useState)({email:"",password:""}),a=Object(F.a)(n,2),t=a[0],c=a[1],r=Object(M.a)(Y),i=Object(F.a)(r,2),s=i[0],l=i[1],o=l.error,j=l.data,b=function(e){var n=e.target,a=n.name,r=n.value;c(Object(p.a)(Object(p.a)({},t),{},Object(D.a)({},a,r)))},u=function(){var e=Object(P.a)(_.a.mark((function e(n){var a,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(t),e.prev=2,e.next=5,s({variables:Object(p.a)({},t)});case 5:a=e.sent,r=a.data,X.login(r.login.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:c({email:"",password:""});case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}();return Object(q.jsxs)($.a,{children:[j?Object(q.jsxs)(A.a,{status:"success",children:[Object(q.jsx)(A.c,{}),Object(q.jsx)(A.d,{mr:2,children:"Success!"}),Object(q.jsx)(A.b,{children:"You have logged in!"})]}):Object(q.jsxs)("form",{onSubmit:u,children:[Object(q.jsx)(k.a,{mb:10,children:"Login"}),Object(q.jsxs)(E.a,{id:"email",isRequired:!0,children:[Object(q.jsx)(B.a,{children:"Email"}),Object(q.jsx)(H.a,{placeholder:"email",name:"email",className:"form-input",type:"email",value:t.email,onChange:b})]}),Object(q.jsxs)(E.a,{mt:5,id:"password",isRequired:!0,children:[Object(q.jsx)(B.a,{children:"Password"}),Object(q.jsx)(H.a,{placeholder:"password",className:"form-input",name:"password",type:"password",value:t.password,onChange:b})]}),Object(q.jsx)(R.a,{variant:"solid",colorScheme:"teal",size:"md",mt:5,type:"submit",children:"Login"})]}),o&&Object(q.jsx)(L.a,{children:o.message})]})},ee=function(){var e=Object(d.useState)({username:"",email:"",password:""}),n=Object(F.a)(e,2),a=n[0],t=n[1],c=Object(M.a)(U),r=Object(F.a)(c,2),i=r[0],s=r[1],l=s.error,o=s.data,j=function(e){var n=e.target,c=n.name,r=n.value;t(Object(p.a)(Object(p.a)({},a),{},Object(D.a)({},c,r)))},b=function(){var e=Object(P.a)(_.a.mark((function e(n){var t,c;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(a),e.prev=2,e.next=5,i({variables:Object(p.a)({},a)});case 5:t=e.sent,c=t.data,X.login(c.addUser.token),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(n){return e.apply(this,arguments)}}();return Object(q.jsxs)($.a,{children:[o?Object(q.jsxs)(A.a,{status:"success",children:[Object(q.jsx)(A.c,{}),Object(q.jsx)(A.d,{mr:2,children:"Success!"}),Object(q.jsx)(A.b,{children:"You have created an account!"})]}):Object(q.jsxs)("form",{onSubmit:b,children:[Object(q.jsx)(k.a,{mb:10,children:"Create an account"}),Object(q.jsxs)(E.a,{id:"name",isRequired:!0,children:[Object(q.jsx)(B.a,{children:"Name"}),Object(q.jsx)(H.a,{placeholder:"name",className:"form-input",name:"username",type:"text",onChange:j,value:a.name})]}),Object(q.jsxs)(E.a,{mt:5,id:"email",isRequired:!0,children:[Object(q.jsx)(B.a,{children:"Email"}),Object(q.jsx)(H.a,{placeholder:"email",className:"form-input",name:"email",type:"email",onChange:j,value:a.email})]}),Object(q.jsxs)(E.a,{mt:5,id:"password",isRequired:!0,children:[Object(q.jsx)(B.a,{children:"Password"}),Object(q.jsx)(H.a,{placeholder:"*****",className:"form-input",name:"password",type:"password",onChange:j,value:a.password})]}),Object(q.jsx)(R.a,{variant:"solid",colorScheme:"teal",size:"md",mt:5,type:"submit",children:"Signup"})]}),l&&Object(q.jsx)(A.a,{status:"error",children:Object(q.jsx)(A.b,{children:l.message})})]})},ne=a(204),ae=a(205),te=Object(V.a)(i||(i=Object(Q.a)(["\n  query user($username: String!) {\n    user(username: $username) {\n      _id\n      username\n      email\n    }\n  }\n"]))),ce=Object(V.a)(s||(s=Object(Q.a)(["\n  query me {\n    me {\n      _id\n      username\n      email\n      place {\n        placeName\n        placeLocation\n        placeType\n      }\n      review {\n        place {\n          placeName\n          placeLocation\n        }\n        comment\n        rating\n        createdAt\n        _id\n      }\n    }\n  }\n"]))),re=Object(V.a)(l||(l=Object(Q.a)(["\n  query getReviews {\n    reviews {\n      _id\n      comment\n      rating\n    }\n  }\n"]))),ie=Object(V.a)(o||(o=Object(Q.a)(["\n  query placeReviews($placeId: ID!) {\n    placeReviews(placeId: $placeId) {\n      place {\n        _id\n        placeName\n        placeLocation\n        placeType\n      }\n      user {\n        _id\n        username\n        email\n      }\n      _id\n      comment\n      rating\n      createdAt\n    }\n  }\n"]))),se=Object(V.a)(j||(j=Object(Q.a)(["\n  query placeSearch($placeType: String, $rating: String) {\n    placeSearch(placeType: $placeType, rating: $rating) {\n      rating\n      comment\n      place {\n        placeName\n        placeLocation\n        placeType\n        _id\n      }\n      user {\n        username\n        email\n      }\n    }\n  }\n"]))),le=function(){var e=Object(d.useState)({placeType:"",rating:""}),n=Object(F.a)(e,2),a=n[0],t=n[1],c=Object(ne.a)(se),r=Object(F.a)(c,2),i=r[0],s=r[1].data,l=(null===s||void 0===s?void 0:s.placeSearch)||[];console.log("data",s);var o=function(e){var n=e.target,c=n.name,r=n.value;t(Object(p.a)(Object(p.a)({},a),{},Object(D.a)({},c,r)))},j=function(){var e=Object(P.a)(_.a.mark((function e(n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(a),e.prev=2,e.next=5,i({variables:Object(p.a)({},a)});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:console.log("46",a);case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(n){return e.apply(this,arguments)}}();return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)("form",{onSubmit:j,children:Object(q.jsxs)(w.a,{align:"center",justify:"space-between",wrap:"wrap",w:"100%",children:[Object(q.jsx)(k.a,{mb:5,children:"Search for a quiet place in Sydney"}),Object(q.jsxs)(E.a,{isRequired:!0,id:"place",mt:5,children:[Object(q.jsx)(B.a,{children:"Type of place"}),Object(q.jsxs)(ae.a,{onChange:o,name:"placeType",value:a.placeType,placeholder:"Select type of place",children:[Object(q.jsx)("option",{children:"Restaurant"}),Object(q.jsx)("option",{children:"Bar"}),Object(q.jsx)("option",{children:"Pub"}),Object(q.jsx)("option",{children:"Other"}),";"]})]}),Object(q.jsxs)(E.a,{isRequired:!0,id:"rating",mt:5,children:[Object(q.jsx)(B.a,{children:"Rating"}),Object(q.jsxs)(ae.a,{onChange:o,name:"rating",value:a.rating,placeholder:"Loudness rating",children:[Object(q.jsx)("option",{children:"Quiet"}),Object(q.jsx)("option",{children:"Average"}),Object(q.jsx)("option",{children:"Bit Loud"}),Object(q.jsx)("option",{children:"Loud"}),Object(q.jsx)("option",{children:"Very Loud"}),Object(q.jsx)("option",{children:"Very Very Loud"})]})]}),Object(q.jsx)(R.a,{type:"submit",variant:"solid",colorScheme:"teal",size:"md",mt:5,children:"Submit"})]})}),Object(q.jsx)($.a,{children:l.map((function(e,n){return Object(q.jsxs)($.a,{mt:10,children:[Object(q.jsxs)(L.a,{children:["Place: ",e.place.placeName]}),Object(q.jsxs)(L.a,{children:["Location: ",e.place.placeLocation]}),Object(q.jsxs)(L.a,{children:["Type: ",e.place.placeType]}),Object(q.jsx)(C.a,{href:"/places/".concat(e.place._id),children:"See Reviews"})]},n)}))})]})},oe=function(){return Object(q.jsx)(q.Fragment,{children:Object(q.jsx)(le,{})})},je=a(206),de=a(207),be=a(215),ue=a(208),me=a(209);function pe(){var e=Object(je.a)(),n=e.isOpen,a=e.onOpen,t=e.onClose;return Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)($.a,{children:[Object(q.jsxs)(w.a,{h:16,alignItems:"center",justifyContent:"space-between",children:[Object(q.jsx)(de.a,{size:"md",icon:n?Object(q.jsx)(ue.a,{}):Object(q.jsx)(me.a,{}),"aria-label":"Open Menu",display:{md:"none"},onClick:n?t:a}),Object(q.jsx)(S.a,{spacing:8,alignItems:"center",children:Object(q.jsx)(C.a,{href:"/",children:Object(q.jsx)(L.a,{fontSize:"sm",fontWeight:"bold",children:"HEARO"})})}),Object(q.jsxs)(w.a,{alignItems:"center",children:[X.loggedIn()?Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(C.a,{href:"/me",variant:"solid",colorScheme:"teal",size:"sm",mr:4,children:"Your Dashboard"}),Object(q.jsx)(C.a,{onClick:function(e){e.preventDefault(),X.logout()},children:Object(q.jsx)(R.a,{variant:"solid",colorScheme:"teal",size:"sm",mr:4,children:"Logout"})})]}):Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(C.a,{href:"/login",variant:"solid",colorScheme:"teal",size:"sm",mr:4,children:"Login"}),Object(q.jsx)(C.a,{href:"/signup",children:Object(q.jsx)(R.a,{variant:"solid",colorScheme:"teal",size:"sm",mr:4,children:"Signup"})})]}),Object(q.jsx)(be.a,{children:Object(q.jsxs)(be.d,{children:[Object(q.jsx)(be.c,{children:"Link 1"}),Object(q.jsx)(be.c,{children:"Link 2"}),Object(q.jsx)(be.b,{}),Object(q.jsx)(be.c,{children:"Link 3"})]})})]})]}),n?Object(q.jsx)($.a,{pb:4,display:{md:"none"}}):null]})})}var Oe=function(){return Object(q.jsx)(w.a,{align:"center",justify:"space-between",wrap:"wrap",w:"100%",mt:10,children:Object(q.jsx)(L.a,{fontSize:"sm",fontWeight:"bold",children:"HEARO \xa9 2021"})})},he=a(211),xe=a(19),ge=a(210),ve=function(){var e=Object(d.useState)({placeName:"",placeLocation:"",placeType:"",rating:"",comment:""}),n=Object(F.a)(e,2),a=n[0],t=n[1],c=Object(M.a)(W,{update:function(e,n){var a=n.data.addPlace;try{var t=e.readQuery({query:re}).reviews;console.log("reviews",t),e.writeQuery({query:re,data:{reviews:[a].concat(Object(xe.a)(t))}})}catch(r){console.error(r)}var c=e.readQuery({query:ce}).me;e.writeQuery({query:ce,data:{me:Object(p.a)(Object(p.a)({},c),{},{review:[].concat(Object(xe.a)(c.review),[a])})}})}}),r=Object(F.a)(c,2),i=r[0],s=r[1].error,l=function(e){var n=e.target,c=n.name,r=n.value;t(Object(p.a)(Object(p.a)({},a),{},Object(D.a)({},c,r)))},o=function(){var e=Object(P.a)(_.a.mark((function e(n){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),console.log(a),e.prev=2,e.next=5,i({variables:Object(p.a)({},a)});case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(2),console.error(e.t0);case 10:t({placeName:"",placeLocation:"",placeType:"",rating:"",comment:""});case 11:case"end":return e.stop()}}),e,null,[[2,7]])})));return function(n){return e.apply(this,arguments)}}();return Object(q.jsx)($.a,{children:Object(q.jsxs)("form",{onSubmit:o,children:[Object(q.jsx)(k.a,{as:"h3",color:"#7FE6D1",size:"md",mb:5,children:"Rate a place based on how loud it is:"}),Object(q.jsxs)(E.a,{isRequired:!0,mt:5,children:[Object(q.jsx)(B.a,{children:"Name of place"}),Object(q.jsx)(H.a,{onChange:l,placeholder:"Name",name:"placeName",value:a.placeName})]}),Object(q.jsxs)(E.a,{isRequired:!0,id:"suburb",mt:5,children:[Object(q.jsx)(B.a,{children:"Suburb"}),Object(q.jsx)(H.a,{onChange:l,placeholder:"Suburb",name:"placeLocation",value:a.placeLocation})]}),Object(q.jsxs)(E.a,{isRequired:!0,id:"place",mt:5,children:[Object(q.jsx)(B.a,{children:"Type of place"}),Object(q.jsxs)(ae.a,{onChange:l,name:"placeType",value:a.placeType,placeholder:"Select type of place",children:[Object(q.jsx)("option",{children:"Restaurant"}),Object(q.jsx)("option",{children:"Bar"}),Object(q.jsx)("option",{children:"Pub"}),Object(q.jsx)("option",{children:"Other"}),";"]})]}),Object(q.jsxs)(E.a,{isRequired:!0,id:"rating",mt:5,children:[Object(q.jsx)(B.a,{children:"Rating"}),Object(q.jsxs)(ae.a,{onChange:l,placeholder:"Rating",name:"rating",value:a.rating,children:[Object(q.jsx)("option",{children:"Quiet"}),Object(q.jsx)("option",{children:"Average"}),Object(q.jsx)("option",{children:"Bit Loud"}),Object(q.jsx)("option",{children:"Loud"}),Object(q.jsx)("option",{children:"Very Loud"}),Object(q.jsx)("option",{children:"Very Very Loud"})]})]}),Object(q.jsxs)(E.a,{mt:5,id:"comment",children:[Object(q.jsx)(B.a,{children:"Comment"}),Object(q.jsx)(ge.a,{onChange:l,placeholder:"Comment",name:"comment",value:a.comment})]}),Object(q.jsx)(R.a,{variant:"solid",colorScheme:"teal",size:"md",mt:5,type:"submit",children:"Submit"}),s&&Object(q.jsxs)(A.a,{mt:10,status:"warning",children:[Object(q.jsx)(A.c,{}),Object(q.jsxs)(A.b,{children:[" ",s.message]})]})]})})},fe=function(e){var n=e.user.review;return console.log(n),n?Object(q.jsx)($.a,{children:n.map((function(e,n){return Object(q.jsxs)($.a,{children:[Object(q.jsxs)(L.a,{children:["Place: ",e.place.placeName]}),Object(q.jsxs)(L.a,{children:["Comment: ",e.comment]}),Object(q.jsxs)(L.a,{children:["Rating: ",e.rating]}),Object(q.jsxs)(L.a,{mb:5,children:["Date: ",e.createdAt]})]},n)}))}):Object(q.jsx)("h3",{children:"No Reviews Yet"})},ye=function(){var e=Object(y.g)().username,n=Object(he.a)(e?te:ce,{variables:{username:e}}),a=n.loading,t=n.data,c=(null===t||void 0===t?void 0:t.me)||(null===t||void 0===t?void 0:t.user)||{};return console.log("user",c),X.loggedIn()&&X.getProfile().data.username===e?Object(q.jsx)(y.a,{to:"/me"}):a?Object(q.jsx)("div",{children:"Loading..."}):(null===c||void 0===c?void 0:c.username)?Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)(S.b,{direction:["column","row"],spacing:"24px",children:[Object(q.jsxs)($.a,{w:["100%","50%"],mr:"20",children:[Object(q.jsxs)(k.a,{mb:5,children:["Hi ",X.getProfile().data.username,"!"]}),Object(q.jsx)(ve,{})]}),Object(q.jsxs)($.a,{children:[Object(q.jsx)(k.a,{as:"h3",color:"#7FE6D1",size:"md",mt:10,mb:3,children:"Your reviews."}),Object(q.jsx)(fe,{user:c})]})]})}):Object(q.jsxs)(A.a,{status:"error",children:[Object(q.jsx)(A.c,{}),Object(q.jsx)(A.d,{mr:2,children:"You need to be logged in to see this. "}),Object(q.jsx)(A.b,{children:"Use the navigation links above to sign up or log in!"})]})},we=function(){var e=Object(y.g)().placeId,n=Object(he.a)(ie,{variables:{placeId:e}}),a=n.loading,t=n.data,c=(null===t||void 0===t?void 0:t.placeReviews)||{};return a?Object(q.jsx)(L.a,{children:"Loading..."}):Object(q.jsxs)(S.b,{children:[Object(q.jsx)(k.a,{mb:10,children:"Single Place details"}),Object(q.jsxs)($.a,{children:[Object(q.jsxs)(L.a,{children:["Name: ",c[0].place.placeName]}),Object(q.jsxs)(L.a,{children:["Location: ",c[0].place.placeLocation]}),Object(q.jsxs)(L.a,{mb:5,children:["Type: ",c[0].place.placeType]})]}),Object(q.jsx)($.a,{children:c.map((function(e,n){return Object(q.jsxs)($.a,{children:[Object(q.jsxs)(L.a,{children:["Rating: ",e.rating]}),Object(q.jsxs)(L.a,{children:["Comment: ",e.comment]}),Object(q.jsxs)(L.a,{mb:5,children:["Date: ",e.createdAt]})]},n)}))})]})},Se=function(){k.a},ke=Object(O.a)({uri:"/graphql"}),Le=Object(v.a)((function(e,n){var a=n.headers,t=localStorage.getItem("id_token");return{headers:Object(p.a)(Object(p.a)({},a),{},{authorization:t?"Bearer ".concat(t):""})}})),Te=new h.a({link:Le.concat(ke),cache:new x.a});var Ce=function(e){return e.cookies,Object(q.jsx)(g.a,{client:Te,children:Object(q.jsxs)(w.a,{direction:"column",maxW:{xl:"1200px"},px:5,m:"0 auto",children:[Object(q.jsx)(pe,{}),Object(q.jsx)(f.a,{children:Object(q.jsxs)(y.d,{children:[Object(q.jsx)(y.b,{exact:!0,path:"/",component:z}),Object(q.jsx)(y.b,{exact:!0,path:"/search",component:oe}),Object(q.jsx)(y.b,{exact:!0,path:"/me",component:ye}),Object(q.jsx)(y.b,{exact:!0,path:"/places/:placeId",component:we}),Object(q.jsx)(y.b,{exact:!0,path:"/login",component:Z}),Object(q.jsx)(y.b,{exact:!0,path:"/signup",component:ee}),Object(q.jsx)(y.b,{exact:!0,path:"/404",component:Se})]})}),Object(q.jsx)(Oe,{})]})})},Re=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,224)).then((function(n){var a=n.getCLS,t=n.getFID,c=n.getFCP,r=n.getLCP,i=n.getTTFB;a(e),t(e),c(e),r(e),i(e)}))},$e=a(219),Ne=a(214),qe=a(213),ze=Object(qe.a)({fonts:{},config:{initialColorMode:"dark",useSystemColorMode:!1}});m.a.render(Object(q.jsx)(b.a.StrictMode,{children:Object(q.jsxs)($e.a,{theme:ze,children:[Object(q.jsx)(Ne.a,{initialColorMode:ze.config.initialColorMode}),Object(q.jsx)(Ce,{})]})}),document.getElementById("root")),Re()}},[[173,1,2]]]);
//# sourceMappingURL=main.8f665fb3.chunk.js.map